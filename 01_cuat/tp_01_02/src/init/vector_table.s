/*-----------------------------------------------------------------------------
* Instructions to be loaded in the vector table
-----------------------------------------------------------------------------*/
.section .vector_table, "ax", %progbits
_vector_table:
    ldr pc, =RESET_handler
    ldr pc, =UND_handler
    ldr pc, =SVC_handler
    ldr pc, =PREF_handler
    ldr pc, =ABT_handler
    ldr pc, =0x00
    ldr pc, =IRQ_handler
    ldr pc, =FIQ_handler

/*-----------------------------------------------------------------------------
*   Reset handler
-----------------------------------------------------------------------------*/
.global RESET_handler
.section .init
RESET_handler:
    b boot             // Intialize memory sections
/*-----------------------------------------------------------------------------
*   Undefined instruction handler
-----------------------------------------------------------------------------*/
.text
UND_handler:
    movs pc, lr

/*-----------------------------------------------------------------------------
*   Software interrupt handler (Supervisor Call)
-----------------------------------------------------------------------------*/
SVC_handler:
    // ldrb r0, [lr, #-4]  // Copy content of SVC syscall_number to r0
    movs pc, lr

/*-----------------------------------------------------------------------------
*   Prefetch error handler
-----------------------------------------------------------------------------*/
PREF_handler:
    subs pc, lr, #4

/*-----------------------------------------------------------------------------
*   Data abort handler
-----------------------------------------------------------------------------*/
ABT_handler:
    subs pc, lr, #8

/*-----------------------------------------------------------------------------
*   Interrupt handler (IRQ)
-----------------------------------------------------------------------------*/
IRQ_handler:
    subs pc, lr, #4

/*-----------------------------------------------------------------------------
*   Fast Interrupt handler (FIQ)
-----------------------------------------------------------------------------*/
FIQ_handler:
    subs pc, lr, #4
